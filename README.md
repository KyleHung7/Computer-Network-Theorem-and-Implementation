# Wireshark å¤šå”å®šå°åŒ…åˆ†æå°ˆæ¡ˆ

## 1. å°ˆæ¡ˆç›®æ¨™
æœ¬å°ˆæ¡ˆä½¿ç”¨ Wireshark æ“·å–ä¸¦åˆ†æå¤šç¨®ç¶²è·¯å”å®šçš„å°åŒ…ï¼ŒåŒ…å« HTTPSã€HTTPã€FTP èˆ‡ Telnetã€‚é€éå¯¦éš›è§€å¯Ÿå„å”å®šå°åŒ…å…§å®¹ï¼Œäº†è§£ä¸åŒå”å®šåœ¨å®‰å…¨æ€§èˆ‡è³‡æ–™å‚³è¼¸æ–¹å¼ä¸Šçš„å·®ç•°ã€‚

## 2. æ¸¬è©¦ç’°å¢ƒ
- ä½œæ¥­ç³»çµ±ï¼šWindows / Linux / macOS
- å·¥å…·ï¼šWiresharkã€ç€è¦½å™¨ã€ftp serverï¼ˆå¯æœ¬åœ°å»ºç½®æˆ–ä½¿ç”¨ public serverï¼‰ã€telnet client

## 3. æ¸¬è©¦å…§å®¹
| å”å®š  | æ¸¬è©¦å…§å®¹                  | æ¸¬è©¦ç¶²å€æˆ–å·¥å…·                         |
|-------|---------------------------|----------------------------------------|
| HTTPS | ç™»å…¥æˆ–ç€è¦½åŠ å¯†ç¶²ç«™         | https://example.com                    |
| HTTP  | å…©å€‹æ™®é€šç¶²ç«™ï¼ˆå¯è§€å¯Ÿ GET/POSTï¼‰ | http://neverssl.com, http://httpbin.org |
| FTP   | ç™»å…¥ FTP ä¸¦ä¸Šå‚³/ä¸‹è¼‰æª”æ¡ˆ     | æœ¬åœ° ftp server æˆ– public æ¸¬è©¦ ftp     |
| Telnet| ç™»å…¥é ç«¯ä¸»æ©Ÿä¸¦å‚³é€æŒ‡ä»¤       | æœ¬åœ° telnet server æˆ– `telnet towel.blinkenlights.nl` |

> ğŸ“Œ ç›¸é—œæ“·å–å°åŒ…èˆ‡æˆªåœ–çš†æ”¾æ–¼ `/captures/` èˆ‡ `/images/` è³‡æ–™å¤¾ã€‚

## 4. å°åŒ…åˆ†ææ‘˜è¦ï¼ˆæ›´å¤šç´°ç¯€è¦‹ report.mdï¼‰
- **HTTPS** å°åŒ…å…§å®¹ç‚ºåŠ å¯†æ ¼å¼ï¼Œç„¡æ³•çœ‹åˆ°å¸³è™Ÿå¯†ç¢¼ã€‚
- **HTTP** å°åŒ…ä¸­å¯æ¸…æ¥šçœ‹åˆ°ç¶²å€ã€åƒæ•¸èˆ‡è¡¨å–®é€å‡ºè³‡æ–™ï¼ˆæœ‰è³‡å®‰é¢¨éšªï¼‰ã€‚
- **FTP** ç™»å…¥éç¨‹ä¸­å¸³è™Ÿå¯†ç¢¼ä»¥æ˜æ–‡å‚³é€ã€‚
- **Telnet** å…¨éƒ¨è³‡æ–™çš†ç‚ºæ˜æ–‡ï¼ˆåŒ…å«æŒ‡ä»¤èˆ‡å›æ‡‰å…§å®¹ï¼‰ã€‚

## 5. å¿ƒå¾—èˆ‡æ”¶ç©«
é€éé€™æ¬¡å¯¦ä½œï¼Œæ›´åŠ äº†è§£ä¸åŒå”å®šçš„å®‰å…¨é¢¨éšªèˆ‡å°åŒ…çµæ§‹ã€‚å°¤å…¶ FTP èˆ‡ Telnet é›–ç„¶ç°¡å–®æ˜“ç”¨ï¼Œä½†å› ç‚ºå‚³è¼¸å…§å®¹æœªåŠ å¯†ï¼Œä¸å»ºè­°åœ¨å…¬é–‹ç¶²è·¯ä¸­ä½¿ç”¨ã€‚



```
wireshark-multi-protocol-analysis/
â”œâ”€â”€ README.md              # å°ˆæ¡ˆç¸½èªªæ˜ï¼ˆä¸‹é¢æœƒå¹«ä½ å¯«åˆç¨¿ï¼‰
â”œâ”€â”€ captures/              # å°åŒ…æ“·å–çµæœ
â”‚   â”œâ”€â”€ https-site.pcap
â”‚   â”œâ”€â”€ http-site1.pcap
â”‚   â”œâ”€â”€ http-site2.pcap
â”‚   â”œâ”€â”€ ftp-session.pcap
â”‚   â””â”€â”€ telnet-session.pcap
â”œâ”€â”€ images/                # å°åŒ…æˆªåœ–
â”‚   â”œâ”€â”€ https-login.png
â”‚   â”œâ”€â”€ http1-get.png
â”‚   â”œâ”€â”€ http2-post.png
â”‚   â”œâ”€â”€ ftp-login.png
â”‚   â””â”€â”€ telnet-command.png
â””â”€â”€ report.md              # è©³ç´°åˆ†æèˆ‡å¿ƒå¾—ï¼ˆå¯ç”¨ Markdown å¯«ï¼‰
```


ğŸ“· æˆªåœ–å»ºè­°ï¼ˆimages è³‡æ–™å¤¾å…§å®¹ï¼‰
åœ–æª”åç¨±	èªªæ˜
https-login.png	æ“·å– HTTPS ç™»å…¥å°åŒ…æˆªåœ–ï¼ˆä¾‹å¦‚ TLS handshakeï¼‰
http1-get.png	HTTP ç€è¦½ç¶²ç«™éç¨‹çš„ GET è«‹æ±‚å°åŒ…æˆªåœ–
http2-post.png	HTTP è¡¨å–®ç™»å…¥ POST è«‹æ±‚å°åŒ…æˆªåœ–
ftp-login.png	FTP ç™»å…¥æ™‚é¡¯ç¤ºå¸³å¯†å°åŒ…æˆªåœ–
telnet-command.png	Telnet ä¸­ä¸‹æŒ‡ä»¤èˆ‡ä¸»æ©Ÿå›æ‡‰çš„å°åŒ…æˆªåœ–

ğŸ“Œ æ“·å–æŠ€å·§èˆ‡è§€å¯Ÿå»ºè­°
å”å®š	éæ¿¾èªæ³•ï¼ˆWiresharkï¼‰	å¯è§€å¯Ÿå…§å®¹
HTTPS	tcp.port == 443	TLS æ¡æ‰‹éç¨‹ï¼ˆçœ‹ä¸åˆ°å¸³å¯†ï¼‰
HTTP	http æˆ– http.request	URIã€GET/POST åƒæ•¸ã€User-Agent
FTP	ftp æˆ– ftp.request.command	USERã€PASSã€STORã€RETR ç­‰å‘½ä»¤
Telnet	telnet æˆ– tcp.port == 23	ä½¿ç”¨è€…è¼¸å…¥çš„æ–‡å­—ã€ä¼ºæœå™¨å›æ‡‰
â“ä½ æ¥ä¸‹ä¾†å¯ä»¥åšä»€éº¼ï¼š
æŒ‰é€™ä»½æ¶æ§‹ç…§è‘—æ“ä½œä¸€æ¬¡ä¸¦ä¿å­˜ .pcap å’Œæˆªåœ–

æŠŠåœ–ç‰‡å’Œæª”æ¡ˆæ”¾ä¸Š GitHub

æŠŠæ¯å€‹å”å®šçš„åˆ†æèˆ‡å¿ƒå¾—è£œåˆ° report.md ä¸­




# Traceroute åˆ†æå ±å‘Š

## ğŸ“Œ å°åŒ…èªªæ˜èˆ‡é¡å‹æ•´ç†
### cmd è¼¸å…¥ tracert www.ntnu.edu.tw
![image](https://github.com/user-attachments/assets/d8800bbc-10cb-45f7-9f3c-2c7d89908ba8)
### ç”¨ Wireshark åµæ¸¬å°åŒ…
#### ç”¨icmp && ip.dst == 140.122.65.193éæ¿¾è³‡æ–™
![image](https://github.com/user-attachments/assets/9a266300-cdf2-4c23-a3a3-7f0fdf1236f9)
| ç·¨è™Ÿç¯„åœ | ç™¼é€ç«¯ â†’ ç›®çš„ç«¯ | å°åŒ…é¡å‹ | TTL | å‚™è¨» |
|----------|----------------|-----------|-----|------|
| 398, 400, 402 | 192.168.102.232 â†’ 140.122.65.193 | ICMP Echo Request | 1 | ç„¡å›æ‡‰ï¼ˆæ”¶åˆ° Time Exceededï¼‰ |
| 399, 401, 403 | 192.168.103.254 â†’ 192.168.102.232 | ICMP Time Exceeded | 1 | ç¬¬ä¸€è·³è·¯ç”±å™¨å›æ‡‰ |
| 467, 469, 471 | 192.168.102.232 â†’ 140.122.65.193 | ICMP Echo Request | 2 | ç„¡å›æ‡‰ï¼ˆæ”¶åˆ° Time Exceededï¼‰ |
| 468, 470, 472 | 140.122.127.254 â†’ 192.168.102.232 | ICMP Time Exceeded | 2 | ç¬¬äºŒè·³è·¯ç”±å™¨å›æ‡‰ |
| 547, 550, 553 | 192.168.102.232 â†’ 140.122.65.193 | ICMP Echo Request | 3 | ç„¡å›æ‡‰ï¼ˆæ”¶åˆ° Time Exceededï¼‰ |
| 549, 552, 554 | 140.122.6.73 â†’ 192.168.102.232 | ICMP Time Exceeded | 3 | ç¬¬ä¸‰è·³è·¯ç”±å™¨å›æ‡‰ |
| 622, 624, 626 | 192.168.102.232 â†’ 140.122.65.193 | ICMP Echo Request | 4 | ç„¡å›æ‡‰ï¼ˆæ”¶åˆ° Time Exceededï¼‰ |
| 623, 625, 627 | 140.122.6.146 â†’ 192.168.102.232 | ICMP Time Exceeded | 4 | ç¬¬å››è·³è·¯ç”±å™¨å›æ‡‰ |
| 775, 777, 779 | 192.168.102.232 â†’ 140.122.65.193 | ICMP Echo Request | 5 | æœ‰å›æ‡‰ï¼ˆEcho Replyï¼‰ |
| 776, 778, 780 | 140.122.65.193 â†’ 192.168.102.232 | ICMP Echo Reply | 5 | æˆåŠŸåˆ°é”ç›®çš„åœ° |

---

## ğŸ›  å°åŒ…é¡å‹èªªæ˜

- `ICMP Echo Request`: ç”¨æ–¼åµæ¸¬ç›®æ¨™æ˜¯å¦å›æ‡‰ï¼Œä¹Ÿå°±æ˜¯ã€Œpingã€ã€‚
- `ICMP Time Exceeded`: è¡¨ç¤ºå°åŒ… TTL ç‚º 0ï¼Œè¢«ä¸­ç¹¼è·¯ç”±å™¨ä¸Ÿæ£„ã€‚
- `ICMP Echo Reply`: è¡¨ç¤ºå°åŒ…æˆåŠŸåˆ°é”ç›®çš„åœ°ã€‚

---

## ğŸŒ è·¯ç”±å™¨ç¯€é»æ¨æ¸¬

| TTL | å›æ‡‰ IP | ç¯€é»ä½ç½®ï¼ˆå¯èƒ½ï¼‰ |
|-----|---------|-----------------|
| 1   | 192.168.103.254 | LAN é–˜é“ï¼ˆå…§éƒ¨ï¼‰ |
| 2   | 140.122.127.254 | æ ¡å…§è·¯ç”±å™¨ï¼ˆé‚Šç•Œï¼‰ |
| 3   | 140.122.6.73 | æ ¡å…§ä¸­ç¹¼ç¯€é» |
| 4   | 140.122.6.146 | æ ¡å…§æˆ–å€åŸŸç¶²æ ¸å¿ƒ |
| 5   | 140.122.65.193 | æœ€çµ‚ç›®çš„åœ° |

---

## ğŸ” å°çµ

- å…±ç™¼é€æ¯ä¸€è·³ 3 å€‹å°åŒ…ï¼Œè§€å¯Ÿç©©å®šæ€§èˆ‡å»¶é²ã€‚
- TTL=5 æ™‚æˆåŠŸæ”¶åˆ° Echo Replyï¼Œä»£è¡¨å°åŒ…åˆ°é”ç›®çš„åœ°ã€‚
- é€™æ˜¯å…¸å‹çš„ `traceroute` æ¢æ¸¬éç¨‹ã€‚



### ç”¨ Invoke-WebRequest -Uri "https://www.ntnu.edu.tw" -UseBasicParsing   

![image](https://github.com/user-attachments/assets/cb1b806e-d878-45cb-a7ea-10ec35f01081)

ip.addr == 140.122.65.193 and tcp.port == 443
![image](https://github.com/user-attachments/assets/b995174f-d2c3-40e3-a515-c035f505bdcd)




http1
![image](https://github.com/user-attachments/assets/c17f1d32-a6d0-430a-a2c6-59ea2a0bbab3)
http
![image](https://github.com/user-attachments/assets/9f1c788c-2cf5-49e6-b6af-dd8af8db1a7d)
![image](https://github.com/user-attachments/assets/d255cb29-eaa3-4e0a-a7f7-235e86cb112b)


| é …ç›®           | è«‹æ±‚ï¼ˆRequestï¼‰                           | å›æ‡‰ï¼ˆResponseï¼‰                                |
|----------------|------------------------------------------|-----------------------------------------------|
| **æ™‚é–“æˆ³**     | 1.413853 ç§’                              | 1.598800 ç§’                                   |
| **ä¾†æº IP**    | 192.168.102.232                          | 34.223.124.45 (ä¼ºæœå™¨)                        |
| **ç›®æ¨™ IP**    | 34.223.124.45 (ä¼ºæœå™¨)                   | 192.168.102.232 (å®¢æˆ¶ç«¯)                      |
| **å”è­°**       | HTTP                                     | HTTP                                          |
| **å°åŒ…å¤§å°**   | 211 bytes                                | 1439 bytes                                    |
| **HTTP è«‹æ±‚**  | `GET / HTTP/1.1`                         | `HTTP/1.1 200 OK (text/html)`                 |
| **æè¿°**       | å®¢æˆ¶ç«¯ç™¼é€è«‹æ±‚æ ¹ç›®éŒ„ (`/`) çš„ HTML é é¢ã€‚  | ä¼ºæœå™¨è¿”å› 200 OKï¼Œä¸¦è¿”å› HTML å…§å®¹ã€‚         |

### è§£æï¼š
- **è«‹æ±‚**ï¼šå®¢æˆ¶ç«¯ç™¼é€äº† `GET` è«‹æ±‚ï¼Œè«‹æ±‚çš„æ˜¯æ ¹ç›®éŒ„ (`/`) çš„ HTML é é¢ã€‚
- **å›æ‡‰**ï¼šä¼ºæœå™¨è¿”å›äº†ç‹€æ…‹ç¢¼ `200 OK`ï¼Œè¡¨ç¤ºè«‹æ±‚æˆåŠŸï¼Œä¸¦è¿”å›äº† HTML å…§å®¹ã€‚



http2

![image](https://github.com/user-attachments/assets/520d6d42-4f5f-403d-995e-f037f185905c)

![image](https://github.com/user-attachments/assets/bc430a4e-40f9-4584-b10e-560d5adf594c)

![image](https://github.com/user-attachments/assets/8367a800-441f-45e1-873d-259d9e08b2f1)



